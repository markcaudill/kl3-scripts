#!/bin/sh
# Attach to existing tmux session or run $PROGRAM inside newly spawned one
# USAGE:	$ ln -s tmuxify mutt && ./mutt

name=${0##*/}
# Execute first program found in $PATH except for the symlink itself to
# avoid recursion
execpath=$(which -a ${name} \
		| grep -v ${PWD}/${name} \
		| head -n1)

tmux has -t "${name}" \
	&& tmux attach -t "${name}" \
	|| tmux new -n "${name}" -s "${name}" \
		${execpath} ${@}
