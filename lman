#!/bin/sh
# Read Linux manual pages from Debian

args=$(getopt cl::s:: ${@})
[ ${?} -ne 0 ] &&
	printf 'usage: %s [-c] [-l language] [-s section] name' "${0##*/}" &&
	exit 2

set -- ${args}

host=https://manpages.debian.org
suite=/unstable
lang=.en
fmt=.gz

[ -t 0 ] &&
	cflag=-a ||
	cflag=-c

while [ ${#} -ne 0 ]; do
	case "${1}"
	in
	-c)
		cflag=-c
		shift;;
	-l)
		lang=."${2}"
		shift 2;;
	-s)
		section=."${2}"
		shift 2;;
	--)
		shift
		break;;
	esac
done

name=/"${@}"
url="${host}${suite}${pkg}${name}${section}${lang}${fmt}"

set -x
curl -fLsS "${url}" |
	mandoc ${cflag}
