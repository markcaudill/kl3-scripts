#!/bin/sh
# set dwm(1)'s status bar
# $CMUS_STATUS_FILE is declared in ~/.profile

while (true)
do
	xsetroot -name "$(printf '%s  E: %s  W: %s  %dÂ°C  %d%%  %s' \
		"$(awk '/^playing$/ { getline; print substr($0, 0, 40); exit(0) }' "${CMUS_STATUS_FILE}")" \
		"$(getip $(ip -o link show \
				| awk -F: '/e(th|np)[0-9]/ { print $2; exit(0) }') \
			| tail -n1)" \
		"$(getssid)" \
		"$(gettemp)" \
		"$(getvol)" \
		"$(date '+%a %d.%m.%y %H:%M')")"
	sleep 30
done
