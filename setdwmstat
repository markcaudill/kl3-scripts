#!/bin/sh
# set dwm(1)'s status bar
# $CMUS_STATUS_FILE is declared in ~/.profile

while (true)
do
	xsetroot -name "$(printf '%.40s  E: %s  W: %s  %.2dÂ°C  %d%%  %.18s' \
		"$(awk '/^playing$/ {
				getline
				print substr($0, 0, 40)
				exit(0)
			}' "${CMUS_STATUS_FILE}")" \
		"$(getip em | tail -n1)" \
		"$(getssid)" \
		$(gettemp) \
		$(getvol | cut -d. -f1) \
		"$(date '+%a %d.%m.%y %H:%M')")"
	sleep 30
done
